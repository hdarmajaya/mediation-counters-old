<h1>Dashboard</h1>

<%= form_tag(dashboard_index_path, method: "get") do %>
  <%= label_tag("Start date:") %>
  <%= text_field_tag :start_date %> 
  <%= submit_tag("Search") %>
<% end %>

<table class="table table-striped table-rounded table-bordered">
  <thead>
    <tr>
      <th><%= link_to (fa_icon "backward"), :start_date => (@date.beginning_of_week-1) %></th>
      <th colspan="6">Week # <%= @current_week %></th>
      <th><%= link_to (fa_icon "forward"), :start_date => (@date.end_of_week+1) %></th>
    </tr>
    <tr>
      <td>Day</td>
      <td></td>
      <td>Input</td>
      <td>Output</td>
      <td>Malformed</td>
      <td>Missing</td>
      <td>ZeroValue</td>
      <td>MinTooLow</td>
    </tr>
  </thead>
  <tbody>
    <% @counters.each do |counter| %>
      <tr>
        <td><%= link_to display_date(counter.calldate), "#" %></td>
        <td></td>
        <td><%= number_with_delimiter(counter.sum_records_in, :delimiter => ',') %></td>
        <td><%= number_with_delimiter(counter.sum_records_out, :delimiter => ',') %></td>
        <td><%= number_with_delimiter(counter.sum_malformed_data, :delimiter => ',') %></td>
        <td><%= number_with_delimiter(counter.sum_missing_data, :delimiter => ',') %></td>
        <td><%= number_with_delimiter(counter.sum_zero_value, :delimiter => ',') %></td>
        <td><%= number_with_delimiter(counter.sum_min_too_low, :delimiter => ',') %></td>
      </tr>
      <% @hourly_counters.each do |hc| %>
        <tr>
          <td><%=hc%></td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>
